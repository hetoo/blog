---
title: 5.1. 分期付款业务逻辑
tag: Laravel 教程 - 电商进阶
---

![file](https://lccdn.phphub.org/uploads/images/201809/05/1/L75EZJ69M7.png?imageView2/2/w/1240/h/0)


分期付款
----

随着国民对提前消费的接受程度逐渐提高，各大电商网站都推出各自的分期付款方案，比如京东的白条分期、支付宝的花呗分期，用户只需要支付一定比例的首付款，即可购得相应的商品。电商网站支持分期付款可以在一定程度上提高商品的销量。

业务逻辑
----

对于分期付款来说，有以下规则：

*   只有当商品订单总金额高于某个数值时才可以使用分期付款；
*   用户使用分期付款时，需要选择还款期限，通常为 3 个月的倍数；
*   使用分期付款需要支付手续费，不同的还款期限手续费费率不同，还款期限越久费率越高；
*   分期付款的手续费与银行贷款的利息不同，银行贷款的利息会随着还款而逐渐降低，而分期付款的手续费则是固定的；
*   使用分期付款后，用户需要立即支付第一期的费用，当第一期费用支付成功后，对应的商品订单状态即变为已支付；
*   用户需每 30 天还款一次，如果在还款截止日期之后仍未还款，需支付逾期费，逾期费按天计算；
*   逾期之后产生的逾期费用最多不超过当期的本金 \+ 手续费；
*   每一期还款金额计算公式：(本金 \+ 手续费) / 还款期数 \+ 当期逾期费；
*   使用了分期付款的商品订单如果发生退款，则退回所有已支付的本金，手续费与逾期费不退回。

本章节我们将要按照上述逻辑逐步实现分期付款功能。

> 由于微信和支付宝的『代扣接口』对商户要求比较高，不太容易申请下来，因此我们无法做到自动扣款，只能让用户每隔 30 天主动到站点上还款。

本文章首发在 [Laravel China 社区](https://laravel-china.org/)